@model WebsiteBanXeMay___Coding.Models.SanPham

@{
    ViewData["Title"] = "Chi tiết sản phẩm";
}

<h2 class="text-center mt-3">Chi tiết sản phẩm</h2>

<div class="card shadow-lg p-4 mt-3">
    <div class="row">
        <!-- Hình ảnh sản phẩm -->
        <div class="col-md-5 text-center">
            @if (!string.IsNullOrEmpty(Model.HinhAnh))
            {
                <img src="@Model.HinhAnh" class="img-fluid rounded shadow-sm" alt="Ảnh sản phẩm"
                     style="max-width: 100%; height: 300px; object-fit: cover;" />
            }
            else
            {
                <p class="text-muted">Chưa có ảnh</p>
            }
        </div>

        <!-- Thông tin sản phẩm -->
        <div class="col-md-7">
            <table class="table table-bordered table-responsive">
                <tr>
                    <th width="30%">Tên sản phẩm</th>
                    <td>@Model.TenSanPham</td>
                </tr>
                <tr>
                    <th>Loại sản phẩm</th>
                    <td>@Model.LoaiSanPham?.TenLoai</td>
                </tr>
                <tr>
                    <th>Nhà sản xuất</th>
                    <td>@Model.NhaSanXuat?.TenNhaSanXuat</td>
                </tr>
                <tr>
                    <th>Nhà cung cấp</th>
                    <td>@Model.NhaCungCap?.TenNhaCungCap</td>
                </tr>
                <tr>
                    <th>Giá bán</th>
                    <td><strong class="text-danger">@Model.GiaBan.ToString("N0") VNĐ</strong></td>
                </tr>
                <tr>
                    <th>Số lượng tồn kho</th>
                    <td>@Model.SoLuongTonKho</td>
                </tr>
                <tr>
                    <th>Trạng thái</th>
                    <td>
                        <span class="badge @(Model.TrangThai ? "bg-success" : "bg-danger")">
                            @(Model.TrangThai ? "Đang bán" : "Ngừng bán")
                        </span>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <!-- Nút chức năng -->
    <div class="mt-4 text-center">
        @if (User.IsInRole("Admin"))
        {
            <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning"><i class="fas fa-edit"></i> Chỉnh sửa</a>
            <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger"
               onclick="return confirm('Bạn có chắc muốn xóa sản phẩm này không?');">
                <i class="fas fa-trash"></i> Xóa
            </a>
        }

        @if (Model.TrangThai && Model.SoLuongTonKho > 0)
        {
            @if (User.Identity.IsAuthenticated)
            {
                <a asp-controller="GioHang" asp-action="AddToCart" asp-route-sanPhamId="@Model.Id"
                   class="btn btn-primary"><i class="fas fa-cart-plus"></i> Mua ngay</a>
            }
            else
            {
                <a asp-area="Admin" asp-controller="Account" asp-action="Login" class="btn btn-secondary">
                    <i class="fas fa-sign-in-alt"></i> Đăng nhập để mua
                </a>

            }
        }
        else
        {
            <button class="btn btn-secondary" disabled><i class="fas fa-ban"></i> Hết hàng</button>
        }

        <a asp-action="Index" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Quay lại</a>
    </div>
</div>
